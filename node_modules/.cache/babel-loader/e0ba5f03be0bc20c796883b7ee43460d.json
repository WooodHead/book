{"ast":null,"code":"import _objectSpread from \"/Users/scott/code/eshop/react-admin/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _slicedToArray from \"/Users/scott/code/eshop/react-admin/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/scott/code/eshop/react-admin/examples/demo/src/products/ProductCreate.tsx\";\nimport React, { useState } from 'react';\nimport { Create, FormTab, NumberInput, ReferenceInput, SelectInput, TabbedForm, TextInput, required // Transform\n} from 'react-admin';\nimport { InputAdornment } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport RichTextInput from 'ra-input-rich-text';\nimport ImageFile from './ImageFile';\nexport var styles = {\n  price: {\n    width: '7em'\n  },\n  width: {\n    width: '7em'\n  },\n  height: {\n    width: '7em'\n  },\n  stock: {\n    width: '7em'\n  },\n  widthFormGroup: {\n    display: 'inline-block'\n  },\n  heightFormGroup: {\n    display: 'inline-block',\n    marginLeft: 32\n  }\n};\nvar useStyles = makeStyles(styles);\n\nvar ProductCreate = function ProductCreate(props) {\n  var classes = useStyles();\n\n  var _useState = useState(),\n      _useState2 = _slicedToArray(_useState, 2),\n      state = _useState2[0],\n      setState = _useState2[1];\n\n  var transform = function transform(data) {\n    return _objectSpread({}, data, {}, state);\n  };\n\n  return React.createElement(Create, Object.assign({}, props, {\n    transform: transform,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }), React.createElement(TabbedForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(FormTab, {\n    label: \"resources.products.tabs.image\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(ImageFile, {\n    onprocessend: function onprocessend(filename) {\n      console.log('File processed', filename);\n      setState({\n        primary_pic_url: \"/static/upload/product/\".concat(filename),\n        list_pic_url: \"/static/upload/product/thumbnail/\".concat(filename)\n      });\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  })), React.createElement(FormTab, {\n    label: \"resources.products.tabs.details\",\n    path: \"details\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57\n    },\n    __self: this\n  }, React.createElement(TextInput, {\n    source: \"ISBN\",\n    label: \"resources.products.ISBN\",\n    validate: required(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), React.createElement(TextInput, {\n    source: \"name\",\n    validate: required(),\n    label: \"resources.products.name\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }), React.createElement(NumberInput, {\n    source: \"retail_price\",\n    label: \"resources.products.retail_price\",\n    className: classes.price,\n    InputProps: {\n      startAdornment: React.createElement(InputAdornment, {\n        position: \"start\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, \"\\xA5\")\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(ReferenceInput, {\n    source: \"category_id\",\n    reference: \"categories\",\n    allowEmpty: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(SelectInput, {\n    source: \"name\",\n    label: \"resources.products.category\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  })), React.createElement(NumberInput, {\n    source: \"stock\",\n    label: \"resources.products.stock\",\n    validate: required(),\n    className: classes.stock,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }), React.createElement(TextInput, {\n    source: \"author\",\n    label: \"resources.products.author\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }), React.createElement(TextInput, {\n    source: \"publisher\",\n    label: \"resources.products.publisher\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(TextInput, {\n    source: \"stock_location\",\n    label: \"resources.products.stock_location\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  })), React.createElement(FormTab, {\n    label: \"resources.products.tabs.description\",\n    path: \"description\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90\n    },\n    __self: this\n  }, React.createElement(RichTextInput, {\n    source: \"goods_desc\",\n    label: \"\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94\n    },\n    __self: this\n  }))));\n};\n\nexport default ProductCreate;","map":{"version":3,"sources":["/Users/scott/code/eshop/react-admin/examples/demo/src/products/ProductCreate.tsx"],"names":["React","useState","Create","FormTab","NumberInput","ReferenceInput","SelectInput","TabbedForm","TextInput","required","InputAdornment","makeStyles","RichTextInput","ImageFile","styles","price","width","height","stock","widthFormGroup","display","heightFormGroup","marginLeft","useStyles","ProductCreate","props","classes","state","setState","transform","data","filename","console","log","primary_pic_url","list_pic_url","startAdornment"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport { FC } from 'react';\nimport {\n    Create,\n    FormTab,\n    NumberInput,\n    ReferenceInput,\n    SelectInput,\n    TabbedForm,\n    TextInput,\n    required,\n    CreateProps,\n   // Transform\n} from 'react-admin';\nimport { InputAdornment } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport RichTextInput from 'ra-input-rich-text';\nimport ImageFile from './ImageFile';\n\nexport const styles = {\n    price: { width: '7em' },\n    width: { width: '7em' },\n    height: { width: '7em' },\n    stock: { width: '7em' },\n    widthFormGroup: { display: 'inline-block' },\n    heightFormGroup: { display: 'inline-block', marginLeft: 32 },\n};\n\nconst useStyles = makeStyles(styles);\n\ntype State = {\n    primary_pic_url: string;\n    list_pic_url: string;\n}\nconst ProductCreate: FC<CreateProps> = props => {\n    const classes = useStyles();\n    const [state,setState] = useState<State>();\n    \n    const transform = (data: any) => ({\n        ...data,\n        ...state\n    });\n\n    return (\n        <Create {...props} transform={transform}>\n            <TabbedForm>\n                <FormTab label=\"resources.products.tabs.image\">\n                   \n                    <ImageFile onprocessend={(filename:string)=>{\n                        console.log('File processed', filename);\n                        setState({\n                            primary_pic_url:`/static/upload/product/${filename}`,\n                            list_pic_url:`/static/upload/product/thumbnail/${filename}`\n                        })\n                    }}/>\n                </FormTab>\n                <FormTab label=\"resources.products.tabs.details\" path=\"details\">\n                    <TextInput source=\"ISBN\" label=\"resources.products.ISBN\" validate={required()} />\n                    <TextInput source=\"name\" validate={required()} label=\"resources.products.name\"/>\n                    <NumberInput\n                        source=\"retail_price\"\n                        label=\"resources.products.retail_price\"\n                        className={classes.price}\n                        InputProps={{\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    ¥\n                                </InputAdornment>\n                            ),\n                        }}\n                    />\n                    <ReferenceInput\n                        source=\"category_id\"\n                        reference=\"categories\"\n                        \n                        allowEmpty\n                    >\n                        <SelectInput source=\"name\" label=\"resources.products.category\"/>\n                    </ReferenceInput>\n                    <NumberInput\n                        source=\"stock\"\n                        label=\"resources.products.stock\"\n                        validate={required()}\n                        className={classes.stock}\n                    />\n                    <TextInput source=\"author\" label=\"resources.products.author\"/>\n                    <TextInput source=\"publisher\" label=\"resources.products.publisher\"/>\n                    <TextInput source=\"stock_location\" label=\"resources.products.stock_location\"/>\n                </FormTab>\n                <FormTab\n                    label=\"resources.products.tabs.description\"\n                    path=\"description\"\n                >\n                    <RichTextInput source=\"goods_desc\" label=\"\" />\n                </FormTab>\n            </TabbedForm>\n        </Create>\n    );\n};\n\nexport default ProductCreate;\n"]},"metadata":{},"sourceType":"module"}