{"ast":null,"code":"import _objectSpread from \"/Users/scott/code/eshop/react-admin/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"/Users/scott/code/eshop/react-admin/examples/demo/src/products/ProductEdit.tsx\";\nimport React from 'react';\nimport { Datagrid, DateField, Edit, EditButton, FormTab, NumberInput, Pagination, ReferenceInput, ReferenceManyField, required, SelectInput, TabbedForm, TextField, TextInput } from 'react-admin'; // import { InputAdornment } from '@material-ui/core';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport RichTextInput from 'ra-input-rich-text';\nimport CustomerReferenceField from '../visitors/CustomerReferenceField';\nimport StarRatingField from '../reviews/StarRatingField'; // import Poster from './Poster';\n\nimport { styles as createStyles } from './ProductCreate';\nimport ImagePicker from './ImagePicker'; // import { AnyIfEmpty } from 'react-redux';\n\nvar ProductTitle = function ProductTitle(_ref) {\n  var record = _ref.record;\n  return record ? React.createElement(\"span\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 37\n    },\n    __self: this\n  }, \"Poster #\", record.reference) : null;\n};\n\nvar useStyles = makeStyles(_objectSpread({}, createStyles, {\n  comment: {\n    maxWidth: '20em',\n    overflow: 'hidden',\n    textOverflow: 'ellipsis',\n    whiteSpace: 'nowrap'\n  },\n  tab: {\n    maxWidth: '40em',\n    display: 'block'\n  }\n}));\n\nvar ProductEdit = function ProductEdit(props) {\n  var classes = useStyles();\n  var record = props.record;\n\n  var transform = function transform(data) {\n    console.log('imageUrl', data);\n    return _objectSpread({}, data);\n  };\n\n  return React.createElement(Edit, Object.assign({}, props, {\n    title: React.createElement(ProductTitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }),\n    transform: transform,\n    undoable: false,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }), React.createElement(TabbedForm, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(FormTab, {\n    label: \"resources.products.tabs.image\",\n    contentClassName: classes.tab,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, React.createElement(ImagePicker, {\n    source: \"primary_pic_url\",\n    imageName: record ? record.primary_pic_url : null,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  })), React.createElement(FormTab, {\n    label: \"resources.products.tabs.details\",\n    path: \"details\",\n    contentClassName: classes.tab,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, React.createElement(TextInput, {\n    source: \"ISBN\",\n    label: \"resources.products.ISBN\",\n    validate: required(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }), React.createElement(TextInput, {\n    source: \"name\",\n    label: \"resources.products.productName\",\n    validate: requiredValidate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  }), React.createElement(ReferenceInput, {\n    source: \"category_id\",\n    reference: \"categories\",\n    validate: requiredValidate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111\n    },\n    __self: this\n  }, React.createElement(SelectInput, {\n    source: \"name\",\n    label: \"resources.products.category\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116\n    },\n    __self: this\n  })), React.createElement(NumberInput, {\n    source: \"stock\",\n    label: \"resources.products.stock\",\n    className: classes.stock,\n    validate: requiredValidate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121\n    },\n    __self: this\n  }), React.createElement(NumberInput, {\n    source: \"sell_volume\",\n    className: classes.stock,\n    validate: requiredValidate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127\n    },\n    __self: this\n  }), React.createElement(TextInput, {\n    source: \"author\",\n    label: \"resources.products.author\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132\n    },\n    __self: this\n  }), React.createElement(TextInput, {\n    source: \"publisher\",\n    label: \"resources.products.publisher\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136\n    },\n    __self: this\n  }), React.createElement(TextInput, {\n    source: \"stock_location\",\n    label: \"resources.products.stock_location\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140\n    },\n    __self: this\n  })), React.createElement(FormTab, {\n    label: \"resources.products.tabs.description\",\n    path: \"description\",\n    contentClassName: classes.tab,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145\n    },\n    __self: this\n  }, React.createElement(RichTextInput, {\n    source: \"goods_desc\",\n    label: \"\",\n    validate: requiredValidate,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150\n    },\n    __self: this\n  })), React.createElement(FormTab, {\n    label: \"resources.products.tabs.reviews\",\n    path: \"reviews\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156\n    },\n    __self: this\n  }, React.createElement(ReferenceManyField, {\n    reference: \"reviews\",\n    target: \"value_id\",\n    addLabel: false,\n    pagination: React.createElement(Pagination, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }),\n    fullWidth: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157\n    },\n    __self: this\n  }, React.createElement(Datagrid, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164\n    },\n    __self: this\n  }, React.createElement(DateField, {\n    source: \"date\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165\n    },\n    __self: this\n  }), React.createElement(CustomerReferenceField, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166\n    },\n    __self: this\n  }), React.createElement(StarRatingField, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    source: \"comment\",\n    cellClassName: classes.comment,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168\n    },\n    __self: this\n  }), React.createElement(TextField, {\n    source: \"status\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172\n    },\n    __self: this\n  }), React.createElement(EditButton, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173\n    },\n    __self: this\n  }))))));\n};\n\nvar requiredValidate = [required()];\nexport default ProductEdit;","map":{"version":3,"sources":["/Users/scott/code/eshop/react-admin/examples/demo/src/products/ProductEdit.tsx"],"names":["React","Datagrid","DateField","Edit","EditButton","FormTab","NumberInput","Pagination","ReferenceInput","ReferenceManyField","required","SelectInput","TabbedForm","TextField","TextInput","makeStyles","RichTextInput","CustomerReferenceField","StarRatingField","styles","createStyles","ImagePicker","ProductTitle","record","reference","useStyles","comment","maxWidth","overflow","textOverflow","whiteSpace","tab","display","ProductEdit","props","classes","transform","data","console","log","primary_pic_url","requiredValidate","stock"],"mappings":"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","sourcesContent":["import  React, { useState,useEffect } from 'react';\nimport { FC } from 'react';\nimport {\n    Datagrid,\n    DateField,\n    Edit,\n    EditButton,\n    EditProps,\n    FormTab,\n    NumberInput,\n    Pagination,\n    ReferenceInput,\n    ReferenceManyField,\n    required,\n    SelectInput,\n    TabbedForm,\n    TextField,\n    TextInput,\n} from 'react-admin';\n// import { InputAdornment } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\nimport RichTextInput from 'ra-input-rich-text';\n\nimport CustomerReferenceField from '../visitors/CustomerReferenceField';\nimport StarRatingField from '../reviews/StarRatingField';\n// import Poster from './Poster';\nimport { styles as createStyles } from './ProductCreate';\nimport { Product } from '../types';\nimport ImagePicker from './ImagePicker';\n// import { AnyIfEmpty } from 'react-redux';\n\ninterface ProductTitleProps {\n    record?: Product;\n}\n\nconst ProductTitle: FC<ProductTitleProps> = ({ record }) =>\n    record ? <span>Poster #{record.reference}</span> : null;\n\nconst useStyles = makeStyles({\n    ...createStyles,\n    comment: {\n        maxWidth: '20em',\n        overflow: 'hidden',\n        textOverflow: 'ellipsis',\n        whiteSpace: 'nowrap',\n    },\n    tab: {\n        maxWidth: '40em',\n        display: 'block',\n    },\n});\n\n\n\nconst ProductEdit: FC<EditProps> = (props:any) => {\n    const classes = useStyles();\n    const { record } = props;\n    \n    const transform = (data: any) => {\n       console.log('imageUrl', data)\n        return {\n            ...data,\n        \n        };\n    };\n\n    \n\n    return (\n        <Edit {...props} title={<ProductTitle />} transform={transform} undoable={false}>\n            <TabbedForm>\n                <FormTab\n                    label=\"resources.products.tabs.image\"\n                    contentClassName={classes.tab}\n                >\n                    {/* <Poster /> */}\n                    <ImagePicker source=\"primary_pic_url\"\n                        imageName={record?record.primary_pic_url:null}\n                       \n                    />\n                </FormTab>\n                <FormTab\n                    label=\"resources.products.tabs.details\"\n                    path=\"details\"\n                    contentClassName={classes.tab}\n                >\n                    <TextInput\n                        source=\"ISBN\"\n                        label=\"resources.products.ISBN\"\n                        validate={required()}\n                    />\n                    <TextInput\n                        source=\"name\"\n                        label=\"resources.products.productName\"\n                        validate={requiredValidate}\n                    />\n                    {/* <NumberInput\n                        source=\"retail_price\"\n                        label=\"resources.products.retail_price\"\n                        className={classes.price}\n                        InputProps={{\n                            startAdornment: (\n                                <InputAdornment position=\"start\">\n                                    ¥\n                                </InputAdornment>\n                            ),\n                        }}\n                        validate={requiredValidate}\n                    /> */}\n\n                    <ReferenceInput\n                        source=\"category_id\"\n                        reference=\"categories\"\n                        validate={requiredValidate}\n                    >\n                        <SelectInput\n                            source=\"name\"\n                            label=\"resources.products.category\"\n                        />\n                    </ReferenceInput>\n                    <NumberInput\n                        source=\"stock\"\n                        label=\"resources.products.stock\"\n                        className={classes.stock}\n                        validate={requiredValidate}\n                    />\n                    <NumberInput\n                        source=\"sell_volume\"\n                        className={classes.stock}\n                        validate={requiredValidate}\n                    />\n                    <TextInput\n                        source=\"author\"\n                        label=\"resources.products.author\"\n                    />\n                    <TextInput\n                        source=\"publisher\"\n                        label=\"resources.products.publisher\"\n                    />\n                    <TextInput\n                        source=\"stock_location\"\n                        label=\"resources.products.stock_location\"\n                    />\n                </FormTab>\n                <FormTab\n                    label=\"resources.products.tabs.description\"\n                    path=\"description\"\n                    contentClassName={classes.tab}\n                >\n                    <RichTextInput\n                        source=\"goods_desc\"\n                        label=\"\"\n                        validate={requiredValidate}\n                    />\n                </FormTab>\n                <FormTab label=\"resources.products.tabs.reviews\" path=\"reviews\">\n                    <ReferenceManyField\n                        reference=\"reviews\"\n                        target=\"value_id\"\n                        addLabel={false}\n                        pagination={<Pagination />}\n                        fullWidth\n                    >\n                        <Datagrid>\n                            <DateField source=\"date\" />\n                            <CustomerReferenceField />\n                            <StarRatingField />\n                            <TextField\n                                source=\"comment\"\n                                cellClassName={classes.comment}\n                            />\n                            <TextField source=\"status\" />\n                            <EditButton />\n                        </Datagrid>\n                    </ReferenceManyField>\n                </FormTab>\n            </TabbedForm>\n        </Edit>\n    );\n};\n\nconst requiredValidate = [required()];\n\nexport default ProductEdit;\n"]},"metadata":{},"sourceType":"module"}